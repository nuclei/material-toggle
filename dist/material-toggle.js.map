{"version":3,"file":"material-toggle.js","sources":["../node_modules/make-template/dist/makeTemplate.js","../src/MaterialToggle.ts","../src/material-toggle.ts"],"sourcesContent":["const makeTemplate = function (strings) {\n    let html = strings[strings.length - 1];\n    let template = document.createElement('template');\n    template.innerHTML = html;\n    return template;\n};\n\nexport { makeTemplate };\n//# sourceMappingURL=makeTemplate.js.map\n","/* global HTMLElement HTMLFormElement HTMLBodyElement */\n'use strict'\n\nimport { makeTemplate } from '../node_modules/make-template/dist/makeTemplate.js'\ndeclare const ShadyCSS // eslint-disable-line no-unused-vars\n/**\n * transfer attributes to input\n */\nconst _transferAttributes = function (ce, element, allowed) {\n  allowed.forEach(function (attrName) {\n    if (ce.hasAttribute(attrName)) {\n      element.setAttribute(attrName, ce.getAttribute(attrName) || '')\n      ce.removeAttribute(attrName)\n    }\n  })\n}\n\n/**\n * get parent form\n */\nconst _getParentForm = function (current) {\n  if (current.parentElement === null) return\n  current = current.parentElement\n    // return form\n  if (current.constructor === HTMLFormElement) return current // eslint-disable-line no-undef\n    // return false on body\n  if (current.constructor === HTMLBodyElement) return false // eslint-disable-line no-undef\n    // dig one level deeper\n  return _getParentForm(current)\n}\n\nvar template = makeTemplate`<style>\n    :host{\n        display: inline-block;\n        position: relative;\n        --material-checkbox-highlight-color: var(--accent-color, rgba(54,79,199,1));\n        --material-checkbox-highlight-overlay-color: var(--material-checkbox-highlight-overlay, rgba(255,255,255,0.75))\n    }\n    :host ::slotted(input){\n        pointer-events: none;\n        position: absolute;\n        left: -100%;\n    }\n    :host ::slotted(label){\n        display: block;\n        min-width: 0px;\n        min-height: 18px;\n        position: relative;\n        background: transparent;\n        padding-left: 54px;\n    }\n    .material-toggle__switch{\n        position: absolute;\n        display: block;\n        top: 50%;\n        transform: translateY(-50%);\n        left: 0;\n        height: 16px;\n        width: 44px;\n        background: white;\n        background-image: linear-gradient(var(--material-checkbox-bg-color, rgb(206,212,218)), var(--material-checkbox-bg-color, rgb(206,212,218)));\n        border-radius: 100px;\n        transition: all 0.3s ease;\n        pointer-events: none;\n    }\n    .material-toggle__knob {\n        position: absolute;\n        left: -5px;\n        top: -5px;\n        display: block;\n        width: 26px;\n        height: 26px;\n        border-radius: 100px;\n        background: var(--material-checkbox-knob-color, rgb(255,255,255));\n        box-shadow: var(--material-checkbox-shadow, 0 .2em .5em rgba(0,0,0,.15));\n        content: '';\n        transition: all 0.3s ease;\n    }\n    :host([checked]) .material-toggle__switch{\n        background-image:\n        linear-gradient(var(--material-checkbox-highlight-overlay-color), var(--material-checkbox-highlight-overlay-color)),\n        linear-gradient(var(--material-checkbox-highlight-color), var(--material-checkbox-highlight-color));\n    }\n    :host([checked]) .material-toggle__knob {\n        left: 20px;\n        background: var(--material-checkbox-highlight-color);\n    }\n    :host([disabled]) .material-toggle__switch{\n        background: var(--material-checkbox-disabled-bg-color, rgb(241,243,245));\n        pointer-events: none;\n    }\n    :host([disabled]) .material-toggle__knob{\n        background: var(--material-checkbox-disabled-knob-color, rgb(206,212,218));\n        box-shadow: var(--material-checkbox-disabled-shadow, 0 .2em .5em rgba(0,0,0,.1));\n    }\n    :host(:focus){\n        outline: none;\n    }\n    :host(:focus) .material-toggle__knob:not(.unfocused){\n        box-shadow: var(--material-checkbox-shadow, 0 .2em .5em rgba(0,0,0,.15)), 0 0 0 .7em rgba(0,0,0,.15);\n    }\n    :host([checked]:focus) .material-toggle__knob:not(.unfocused){\n        box-shadow: var(--material-checkbox-shadow, 0 .2em .5em rgba(0,0,0,.15)), 0 0 0 .7em var(--material-checkbox-semi-highlight-color, rgba(54,79,199,.25));\n    }\n</style>\n    <slot></slot>\n    <div class=\"material-toggle__switch\">\n        <div class=\"material-toggle__knob\" draggable=\"true\"></div>\n    </div>\n`\n\n/**\n * A simple (boolean) material toggle based on a checkbox, which works in a normal html form\n */\nexport class MaterialToggle extends HTMLElement { // eslint-disable-line no-undef\n  /* Typescript: declare variables */\n  private _knob: any = null // eslint-disable-line no-undef\n  private _label: any = null // eslint-disable-line no-undef\n  private _checkbox: any = null // eslint-disable-line no-undef\n\n  constructor () {\n    super()\n        // Attach a shadow root to the element.\n    let shadowRoot = this.attachShadow({mode: 'open'})\n    // check if polyfill is used\n    if (typeof ShadyCSS !== 'undefined') {\n      ShadyCSS.prepareTemplate(template, 'material-toggle') // eslint-disable-line no-undef\n      ShadyCSS.styleElement(this) // eslint-disable-line no-undef\n    }\n    shadowRoot.appendChild(document.importNode(template.content, true))\n  }\n\n  connectedCallback () {\n    // get elements\n    this._knob = this.shadowRoot.querySelector('.material-toggle__knob')\n    this._label = document.createElement('label')\n    this._label.innerHTML = `\n            <input type=\"checkbox\" tabindex=\"-1\" style=\"position: absolute; opacity: 0; pointer-events: none;\"/>\n            <div class=\"material-toggle__label\">${this.innerHTML}</div>\n        `\n        // remove potential label from slot as it is added above\n    this.innerHTML = ''\n    this.appendChild(this._label)\n    this._checkbox = this.querySelector('input')\n\n    _transferAttributes(this, this._checkbox, [\n      'name',\n      'required',\n      'autofocus'\n    ])\n        // reset values\n    this.disabled = this.disabled\n    this.checked = this.checked\n        // add events\n    this._addEvents()\n  }\n\n  _addEvents () {\n        // add event\n    this._checkbox.addEventListener('change', function (e) {\n      this.checked = e.target.checked\n    }.bind(this))\n        // move focus to main element if checkbox is focused\n    this._checkbox.addEventListener('focus', function () {\n      this.focus()\n    }.bind(this))\n        // toggle checkbox in space\n    this.addEventListener('keydown', function (e) {\n            // space\n      if (e.keyCode === 32) {\n        this.checked = !this._checkbox.checked\n      }\n    }.bind(this))\n        // submit form on return\n    this.addEventListener('keydown', function (e) {\n      var $form = _getParentForm(e.target)\n      if ($form === undefined) return\n            // return\n      if (e.keyCode === 13) {\n        if ($form.checkValidity()) {\n          $form.submit()\n        } else if ($form.querySelector('[type=\"submit\"]') !== null) {\n                    // needed to trigger validation\n          $form.querySelector('[type=\"submit\"]').click()\n        }\n        return\n      }\n    })\n        // remove focus on click\n    this._label.addEventListener('mousedown', function () {\n      this._knob.classList.add('unfocused')\n    }.bind(this))\n        // add focus on mouse event\n    this._label.addEventListener('keydown', function () {\n      this._knob.classList.remove('unfocused')\n    }.bind(this))\n  }\n\n  static get observedAttributes () {\n    return ['disabled', 'checked', 'validity']\n  }\n\n  attributeChangedCallback (attrName, oldVal, newVal) {\n    if (this.disabled) {\n      this.setAttribute('tabindex', '-1')\n      this.setAttribute('aria-disabled', 'true')\n    } else {\n      this.setAttribute('tabindex', '0')\n      this.setAttribute('aria-disabled', 'false')\n    }\n  }\n\n  get disabled () {\n    return this.hasAttribute('disabled')\n  }\n\n  set disabled (val) {\n    // Reflect the value of `disabled` as an attribute.\n    if (val) {\n      this.setAttribute('disabled', '')\n      this._checkbox.setAttribute('disabled', '')\n    } else {\n      this.removeAttribute('disabled')\n      this._checkbox.removeAttribute('disabled')\n    }\n  }\n\n  get checked () {\n    return this.hasAttribute('checked')\n  }\n\n  set checked (val) {\n    if (val) {\n      this.setAttribute('checked', '')\n      if (this._checkbox !== undefined) {\n        this._checkbox.setAttribute('checked', '')\n      }\n    } else {\n      this.removeAttribute('checked')\n      if (this._checkbox !== undefined) {\n        this._checkbox.removeAttribute('checked')\n      }\n    }\n  }\n\n  set active (val: boolean) {\n    // Reflect the value of `validity` as an attribute.\n    if (val === true) {\n      this.setAttribute('validity', 'true')\n    } else if (val === false) {\n      this.removeAttribute('validity')\n    }\n  }\n\n  get validity () {\n    return this.getAttribute('validity') === 'true'\n  }\n}\n","import { MaterialToggle } from './MaterialToggle'\ncustomElements.define('material-toggle', MaterialToggle) // eslint-disable-line no-undef\n"],"names":[],"mappings":"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"}